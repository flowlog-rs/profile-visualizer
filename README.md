# FlowLog Profile Visualizer

A small CLI that converts **FlowLog profiling outputs** into a single, self-contained HTML report for interactive exploration.

This tool is intended to be used alongside FlowLog’s profiler: FlowLog emits a profile log (`log.tsv`) and an operator-to-logical-node mapping (`ops.json`), and this CLI renders them into a browsable visualization.

## What it does

Given FlowLog’s profiling artifacts, the CLI:

- Parses **FlowLog’s** profile log (`log.tsv`) and reads **FlowLog’s** operator mapping (`ops.json`).
- Maps operator addresses to logical nodes (inputs, strata, rules operators, runtime operators, inspection).
- Aggregates:
  - **Per-node** activations and total active time
  - **Per-operator** activations and total active time
- Produces a self-contained `report.html` with:
  - A **node list** grouped by block (input / strata / inspect) and, within strata, grouped by **rule vs. runtime**
  - An interactive **DAG view** (pan/zoom + click-to-select)
  - A per-node **operator table** for detailed drill-down

## Inputs (generated by FlowLog)

This tool consumes files **generated by FlowLog**:

- `log.tsv`: FlowLog-generated profile log (tab-separated).
- `ops.json`: FlowLog-generated operator mapping JSON (logical nodes, blocks/strata, rule stage/runtime tags, operator addresses, DAG edges).

> Note: `ops.json` provides the “semantic structure” (nodes and edges). `log.tsv` provides the runtime measurements. The report combines them.

## Usage

Build and run directly:

```bash
cargo run --release -- report --log examples/log.tsv --ops examples/ops.json --out report.html
```

Then open `report.html` in your browser.

### CLI flags

- `--log <PATH>`: path to FlowLog profile log (`log.tsv`).
- `--ops <PATH>`: path to FlowLog operator mapping (`ops.json`).
- `--out <PATH>`: output HTML file to write (e.g., `report.html`).

## Output

- `report.html`: a standalone HTML file (no external assets) that you can share or archive alongside the profiling run.

## Typical workflow

1. Run your FlowLog program with profiling enabled to produce `log.tsv` and `ops.json`.
2. Run **FlowLog Profile Viz** to generate `report.html`.
3. Use the report to identify hot nodes/operators and understand how work is distributed across components.
